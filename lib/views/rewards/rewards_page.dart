import 'package:apph2/base_app_module_routing.dart';
import 'package:apph2/infraestructure/infraestructure.dart';
import 'package:apph2/theme/theme.dart';
import 'package:apph2/theme/widgets/h2loading.dart';
import 'package:apph2/views/rewards/rewards_state.dart';
import 'package:apph2/views/rewards/rewards_viewmodel.dart';
import 'package:flutter/material.dart';
import 'package:flutter_svg/svg.dart';

class RewardsPage extends StatefulWidget {
  const RewardsPage({Key? key}) : super(key: key);

  @override
  // ignore: library_private_types_in_public_api
  _RewardsPageState createState() => _RewardsPageState();
}

class _RewardsPageState extends ViewState<RewardsPage, RewardsViewModel> {

  @override
  Widget build(BuildContext context) {
    return ViewModelBuilder<RewardsViewModel, RewardsState>(
      viewModel: viewModel,
      buildWhen: (previous, current) {
        return previous.loading != current.loading;
      },
      builder: (context, state) {
        return state.loading
            ? const Center(child: H2Loading())
            : _buildPage(context, state);
      },
    );
  }

  Widget _buildPage(BuildContext context, RewardsState state) {
    return Container(
      decoration: const BoxDecoration(
        color: Colors.white,
        image: DecorationImage(
          image: AssetImage("assets/images/bg_h2pay.png"),
        ),
        borderRadius: BorderRadius.only(
          topLeft: Radius.circular(27),
          topRight: Radius.circular(27),
        ),
      ),
      child: Padding(
        padding: EdgeInsets.symmetric(horizontal: const Dimension(4.5).width),
        child: Column(
          crossAxisAlignment: CrossAxisAlignment.start,
          children: [
            Dimension.xl.vertical,
            Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                GestureDetector(
                  onTap: () => {
                    Nav.pushNamed(BaseAppModuleRouting.rewardsPoints),
                  },
                  child: Container(
                    padding: EdgeInsets.all(Dimension.sm.value),
                    decoration: BoxDecoration(
                      color: AppThemeBase.colorPrimarySuperlight,
                      borderRadius: BorderRadius.circular(10),
                      boxShadow: const [
                        BoxShadow(
                          color: Color(0x1A000000),
                          offset: Offset(0, 0),
                          blurRadius: 23,
                        ),
                      ],
                    ),
                    width: const Dimension(139/8).width,
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Row(
                          children: [
                            SvgPicture.string(
                                '''<svg width="26" height="35" viewBox="0 0 26 35" fill="none" xmlns="http://www.w3.org/2000/svg"><path id="Vector" d="M23.8333 30.625V13.125H16.25C14.4557 13.125 13 11.6553 13 9.84375V2.1875H4.33333C3.1349 2.1875 2.16667 3.16504 2.16667 4.375V30.625C2.16667 31.835 3.1349 32.8125 4.33333 32.8125H21.6667C22.8651 32.8125 23.8333 31.835 23.8333 30.625ZM23.7995 10.9375C23.7521 10.7461 23.6573 10.5684 23.5151 10.4316L15.6677 2.50879C15.5255 2.36523 15.3562 2.26953 15.1667 2.22168V9.84375C15.1667 10.4453 15.6542 10.9375 16.25 10.9375H23.7995ZM0 4.375C0 1.96191 1.94323 0 4.33333 0H14.9026C15.7625 0 16.5885 0.348633 17.1979 0.963867L25.0453 8.87988C25.6547 9.49512 26 10.3291 26 11.1973V30.625C26 33.0381 24.0568 35 21.6667 35H4.33333C1.94323 35 0 33.0381 0 30.625V4.375ZM4.33333 5.46875C4.33333 4.86719 4.82083 4.375 5.41667 4.375H9.75C10.3458 4.375 10.8333 4.86719 10.8333 5.46875C10.8333 6.07031 10.3458 6.5625 9.75 6.5625H5.41667C4.82083 6.5625 4.33333 6.07031 4.33333 5.46875ZM4.33333 9.84375C4.33333 9.24219 4.82083 8.75 5.41667 8.75H9.75C10.3458 8.75 10.8333 9.24219 10.8333 9.84375C10.8333 10.4453 10.3458 10.9375 9.75 10.9375H5.41667C4.82083 10.9375 4.33333 10.4453 4.33333 9.84375ZM14.0833 16.6523V17.582C14.6453 17.6572 15.187 17.7666 15.688 17.8896C16.2703 18.0264 16.6292 18.6211 16.4937 19.209C16.3583 19.7969 15.7693 20.1592 15.187 20.0225C14.4286 19.8447 13.6839 19.708 12.9865 19.6943C12.3974 19.6875 11.7745 19.8105 11.3411 20.043C10.9281 20.2617 10.8401 20.4736 10.8401 20.6855C10.8401 20.7881 10.8536 20.9316 11.287 21.1641C11.7609 21.417 12.4245 21.6016 13.2776 21.834L13.3115 21.8408C14.0766 22.0459 15.0177 22.3057 15.7557 22.7227C16.5547 23.1738 17.3198 23.9326 17.3401 25.1768C17.3604 26.4688 16.6224 27.3438 15.7422 27.8359C15.2344 28.1162 14.6656 28.2871 14.0901 28.376V29.2988C14.0901 29.9004 13.6026 30.3926 13.0068 30.3926C12.4109 30.3926 11.9234 29.9004 11.9234 29.2988V28.3281C11.1854 28.1982 10.488 27.9863 9.87187 27.7949C9.72969 27.7471 9.5875 27.7061 9.45208 27.665C8.87656 27.4941 8.55156 26.8857 8.72083 26.3047C8.8901 25.7236 9.49271 25.3955 10.0682 25.5664C10.2307 25.6143 10.3932 25.6621 10.549 25.71C11.4698 25.9902 12.2281 26.2227 13.0406 26.25C13.6771 26.2705 14.2932 26.1406 14.6927 25.915C15.0583 25.71 15.1802 25.4912 15.1734 25.2041C15.1734 25.04 15.1193 24.8691 14.6995 24.6299C14.2323 24.3633 13.562 24.1719 12.7224 23.9463L12.6141 23.9189C11.8693 23.7139 10.9755 23.4746 10.2714 23.0918C9.49271 22.668 8.69375 21.9365 8.68698 20.6924C8.68021 19.3936 9.49271 18.5527 10.3458 18.1016C10.8401 17.8418 11.3885 17.6777 11.9302 17.5889V16.6523C11.9302 16.0508 12.4177 15.5586 13.0135 15.5586C13.6094 15.5586 14.0969 16.0508 14.0969 16.6523H14.0833Z" fill="url(#paint0_linear_1500_4326)"/><defs><linearGradient id="paint0_linear_1500_4326" x1="0" y1="0" x2="26" y2="35" gradientUnits="userSpaceOnUse"><stop stop-color="#127FF9"/><stop offset="1" stop-color="#12B4F9"/></linearGradient></defs></svg>'''),
                          ],
                        ),
                        const Dimension(5/8).vertical,
                        Text(
                          'Extrato de Pontos',
                          style: context.text.caption.copyWith(
                            fontSize: 13.fontSize,
                            fontWeight: FontWeight.w600
                          ),
                        ),
                        const Dimension(5/8).vertical,
                        Text(
                          'visualize o extrato completo de seus Pontos Rewards',
                          style: context.text.body1.copyWith(
                            fontSize: 10.fontSize,
                            color: AppThemeBase.colorSecondary06
                          ),
                        )
                      ],
                    ),
                  ),
                ),
                GestureDetector(
                  onTap: () => {
                    Nav.pushNamed(BaseAppModuleRouting.rewardsRedemption),
                  },
                  child: Container(
                    padding: EdgeInsets.all(Dimension.sm.value),
                    decoration: BoxDecoration(
                      color: AppThemeBase.colorPrimarySuperlight,
                      borderRadius: BorderRadius.circular(10),
                      boxShadow: const [
                        BoxShadow(
                          color: Color(0x1A000000),
                          offset: Offset(0, 0),
                          blurRadius: 23,
                        ),
                      ],
                    ),
                    width: const Dimension(139/8).width,
                    child: Column(
                      crossAxisAlignment: CrossAxisAlignment.start,
                      mainAxisAlignment: MainAxisAlignment.center,
                      children: [
                        Row(
                          children: [
                            SvgPicture.string(
                                '''<svg width="25" height="34" viewBox="0 0 25 34" fill="none" xmlns="http://www.w3.org/2000/svg"><path id="Vector" d="M10.841 0.473159C11.863 -0.15772 13.1388 -0.15772 14.1607 0.473159L15.2282 1.13724C15.4104 1.25014 15.6187 1.3099 15.8335 1.30326L17.0833 1.27006C18.2745 1.2435 19.3875 1.8943 19.9603 2.96347L20.5592 4.07913C20.6633 4.27172 20.813 4.42445 21.0018 4.53071L22.0953 5.14166C23.1433 5.72606 23.7812 6.855 23.7551 8.07691L23.7226 9.35195C23.7161 9.5711 23.7747 9.78361 23.8853 9.96955L24.5362 11.0586C25.1546 12.1013 25.1546 13.4029 24.5362 14.4455L23.8853 15.5346C23.7747 15.7205 23.7161 15.933 23.7226 16.1522L23.7551 17.4272C23.7812 18.6425 23.1433 19.7781 22.0953 20.3625L21.0018 20.9734C20.813 21.0797 20.6633 21.2324 20.5592 21.425L19.9603 22.5406C19.3875 23.6098 18.281 24.2606 17.0833 24.2341L15.8335 24.2009C15.6187 24.1942 15.4104 24.254 15.2282 24.3669L14.1607 25.031C13.1388 25.6618 11.863 25.6618 10.841 25.031L9.77355 24.3669C9.5913 24.254 9.383 24.1942 9.1682 24.2009L7.91845 24.2341C6.72728 24.2606 5.61423 23.6098 5.04142 22.5406L4.44258 21.425C4.33844 21.2324 4.18873 21.0797 3.99996 20.9734L2.90643 20.3625C1.85846 19.7781 1.22057 18.6491 1.24661 17.4272L1.27915 16.1522C1.28566 15.933 1.22708 15.7205 1.11643 15.5346L0.465514 14.4455C-0.152852 13.4029 -0.152852 12.1013 0.465514 11.0586L1.11643 9.96955C1.22708 9.78361 1.28566 9.5711 1.27915 9.35195L1.24661 8.07691C1.22057 6.86164 1.85846 5.72606 2.90643 5.14166L3.99996 4.53071C4.18873 4.42445 4.33844 4.27172 4.44258 4.07913L5.04142 2.96347C5.61423 1.8943 6.72078 1.2435 7.91845 1.27006L9.1682 1.30326C9.383 1.3099 9.5913 1.25014 9.77355 1.13724L10.841 0.473159ZM13.0802 2.28611C12.7287 2.06696 12.2796 2.06696 11.9281 2.28611L10.8606 2.95019C10.3398 3.27559 9.7345 3.44161 9.12264 3.42169L7.87289 3.38848C7.45631 3.3752 7.07227 3.60763 6.87699 3.97952L6.27816 5.10182C5.98524 5.64637 5.54262 6.09794 5.00888 6.39678L3.90884 7.00774C3.54433 7.2136 3.32302 7.60541 3.32952 8.02379L3.36207 9.29883C3.37509 9.92306 3.21236 10.534 2.89992 11.0719L2.24901 12.161C2.03421 12.5196 2.03421 12.9778 2.24901 13.3365L2.89992 14.4255C3.21887 14.9568 3.3816 15.5744 3.36207 16.1987L3.32952 17.4737C3.31651 17.8987 3.54433 18.2905 3.90884 18.4897L5.00237 19.1007C5.53612 19.3995 5.97874 19.8511 6.27165 20.3957L6.87048 21.5113C7.07227 21.8832 7.45631 22.109 7.86638 22.1023L9.11613 22.0691C9.72799 22.0559 10.3268 22.2219 10.8541 22.5406L11.9216 23.2047C12.2731 23.4239 12.7222 23.4239 13.0737 23.2047L14.1412 22.5406C14.6619 22.2152 15.2672 22.0492 15.8791 22.0691L17.1289 22.1023C17.5454 22.1156 17.9295 21.8832 18.1247 21.5113L18.7236 20.3957C19.0165 19.8511 19.4591 19.3995 19.9929 19.1007L21.0864 18.4897C21.4509 18.2839 21.6722 17.8921 21.6657 17.4737L21.6332 16.1987C21.6201 15.5744 21.7829 14.9635 22.0953 14.4255L22.7462 13.3365C22.961 12.9778 22.961 12.5196 22.7462 12.161L22.0953 11.0719C21.7764 10.5407 21.6136 9.92306 21.6332 9.29883L21.6657 8.02379C21.6787 7.59877 21.4509 7.20696 21.0864 7.00774L19.9929 6.39678C19.4591 6.09794 19.0165 5.64637 18.7236 5.10182L18.1247 3.97952C17.923 3.60763 17.5389 3.38184 17.1289 3.38848L15.8791 3.42169C15.2672 3.43497 14.6684 3.26895 14.1412 2.95019L13.0737 2.28611H13.0802ZM12.5009 9.02655C12.0222 9.02655 11.5482 9.12274 11.1059 9.30963C10.6637 9.49652 10.2619 9.77045 9.92339 10.1158C9.58491 10.4611 9.31642 10.8711 9.13323 11.3223C8.95005 11.7735 8.85577 12.257 8.85577 12.7454C8.85577 13.2338 8.95005 13.7174 9.13323 14.1686C9.31642 14.6198 9.58491 15.0297 9.92339 15.3751C10.2619 15.7204 10.6637 15.9943 11.1059 16.1812C11.5482 16.3681 12.0222 16.4643 12.5009 16.4643C12.9796 16.4643 13.4535 16.3681 13.8958 16.1812C14.338 15.9943 14.7399 15.7204 15.0783 15.3751C15.4168 15.0297 15.6853 14.6198 15.8685 14.1686C16.0517 13.7174 16.146 13.2338 16.146 12.7454C16.146 12.257 16.0517 11.7735 15.8685 11.3223C15.6853 10.8711 15.4168 10.4611 15.0783 10.1158C14.7399 9.77045 14.338 9.49652 13.8958 9.30963C13.4535 9.12274 12.9796 9.02655 12.5009 9.02655ZM18.2289 12.7454C18.2289 14.2953 17.6254 15.7818 16.5512 16.8777C15.477 17.9737 14.02 18.5893 12.5009 18.5893C10.9817 18.5893 9.52476 17.9737 8.45055 16.8777C7.37633 15.7818 6.77285 14.2953 6.77285 12.7454C6.77285 11.1955 7.37633 9.70908 8.45055 8.61313C9.52476 7.51718 10.9817 6.90148 12.5009 6.90148C14.02 6.90148 15.477 7.51718 16.5512 8.61313C17.6254 9.70908 18.2289 11.1955 18.2289 12.7454ZM0.0879853 29.3342L2.76974 22.8328C2.86738 22.9524 3.00407 23.1516 3.21887 23.5501C3.47923 24.0415 3.8112 24.4798 4.19524 24.8517L2.72418 28.4178L5.20415 28.0393C5.60772 27.9795 6.00477 28.1588 6.22608 28.5108L7.61252 30.6757L9.30489 26.5716C9.42206 26.6314 9.57177 26.7177 9.75402 26.8306C10.2097 27.1162 10.6978 27.322 11.199 27.4482L8.77115 33.3386C8.62144 33.7039 8.28947 33.9496 7.90543 33.9828C7.5214 34.016 7.15038 33.8367 6.94208 33.5047L4.84615 30.244L1.19454 30.7952C0.823515 30.8483 0.452496 30.6956 0.218168 30.3967C-0.0161606 30.0979 -0.0617244 29.6862 0.0814762 29.3342H0.0879853ZM16.2306 33.3453L13.8027 27.4549C14.3039 27.322 14.7921 27.1162 15.2477 26.8373C15.43 26.7244 15.5797 26.638 15.6968 26.5783L17.3892 30.6823L18.7757 28.5174C18.997 28.1721 19.4005 27.9861 19.7976 28.0459L22.2776 28.4244L20.8065 24.8583C21.1905 24.4864 21.5225 24.0481 21.7829 23.5567C21.9977 23.1582 22.1344 22.959 22.232 22.8395L24.9138 29.3409C25.057 29.6928 25.0049 30.0979 24.7771 30.4034C24.5492 30.7089 24.1717 30.8616 23.8007 30.8018L20.1491 30.2507L18.0531 33.5179C17.8449 33.85 17.4738 34.0293 17.0898 33.9961C16.7058 33.9629 16.3738 33.7105 16.2241 33.3519L16.2306 33.3453Z" fill="url(#paint0_linear_1500_4433)"/><defs><linearGradient id="paint0_linear_1500_4433" x1="2.5" y1="1.5" x2="25" y2="34" gradientUnits="userSpaceOnUse"><stop stop-color="#FFA800"/><stop offset="1" stop-color="#FF5C00"/></linearGradient></defs></svg>'''),
                          ],
                        ),
                        const Dimension(5/8).vertical,
                        Text(
                          'Resgate de Prêmios',
                          style: context.text.caption.copyWith(
                            fontSize: 13.fontSize,
                            fontWeight: FontWeight.w600
                          ),
                        ),
                        const Dimension(5/8).vertical,
                        Text(
                          'acesse o catálogo completo de Prêmios Rewards',
                          style: context.text.body1.copyWith(
                            fontSize: 10.fontSize,
                            color: AppThemeBase.colorSecondary06
                          ),
                        )
                      ],
                    ),
                  ),
                ),
              ],
            ),
          ],
        ),
      ),
    );
  }
}
